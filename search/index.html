<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://pyscript.net/alpha/pyscript.css"/>
  <script defer src="https://pyscript.net/alpha/pyscript.js"></script>
  <link rel="stylesheet" href="https://pokemogukunns.github.io/keiryouka/css/pure-min.css">
  <link rel="stylesheet" href="https://pokemogukunns.github.io/keiryouka/css/grids-responsive-min.css">
  <link rel="stylesheet" href="https://pokemogukunns.github.io/keiryouka/css/ionicons.min.css">
  <link rel="stylesheet" href="https://pokemogukunns.github.io/keiryouka/css/default.css">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body class="no-theme">
  <py-env>
    - /cache.py
    - /main.py
     - paths:
      - https://pokemogukunns.github.io/keiryouka/main.py
  </py-env>
  <py-script>
    from main import home; 
    def execute_function(): search();
    execute_function()
  </py-script>

  <div class="pure-g"> 
    <div class="pure-u-1 pure-u-md-2-24"></div> 
    <div class="pure-u-1 pure-u-md-20-24" id="contents"> 
      <div class="pure-g navbar h-box"> 
        <div class="pure-u-1 pure-u-md-12-24 searchbar">
          <form class="pure-form" action="/github-yuki/search" method="get"> 
            <fieldset> 
              <input type="search" id="searchbox" autocomplete="on" autocorrect="on" autocapitalize="none" spellcheck="false" name="q" placeholder="検索" title="検索" oninput="updateSpan()"> 
              <span id="word-display"></span>
            </fieldset> 
          </form> 
        </div> 
      </div> 
      <div class="pure-g"> 
        {% for result in results %}
          <div class="pure-u-1 pure-u-md-1-4">
            <div class="h-box"> 
              {% if result["type"] == "video" %}
                <a style="width:100%" href="/github-yuki/watch?v={{ result['id'] }}"> 
                  <div class="thumbnail"> 
                    <img loading="lazy" class="thumbnail" src="{% if proxy == "True" %}/thumbnail?v={{ result['id'] }}{% else %}https://img.youtube.com/vi/{{ result['id'] }}/0.jpg{% endif %}" onerror="document.cookie = 'proxy=True;max-age=2592000;';"> 
                    <p class="length">{{result["length"]}}</p> 
                  </div> 
                  <p dir="auto">{{ result['title'] }}</p> 
                </a>
              {% endif %}
              <!-- 他の条件分岐 -->
            </div>
          </div>
        {% endfor %}
      </div> 
      <div class="pure-g h-box"> 
        <div class="pure-u-1 pure-u-lg-1-5"></div> 
        <div class="pure-u-1 pure-u-lg-3-5"></div> 
        <div class="pure-u-1 pure-u-lg-1-5" style="text-align:right"> 
          <a href="{{next}}"> 次のページ </a> 
        </div> 
      </div> 
      
      <script>
        function updateSpan() {
          const searchValue = document.getElementById('searchbox').value;
          document.getElementById('word-display').textContent = searchValue;
        }
        
        $('#searchbox').autocomplete({
          source: function (request, response) {
            var url = "/suggest?keyword=" + encodeURIComponent(request.term);
            var xhr = new XMLHttpRequest();
            xhr.open("GET", url, true);
            xhr.onload = function() {
              if (xhr.status === 200) {
                response(JSON.parse(xhr.responseText));
              }
            };
            xhr.send();
          },
          delay: 300
        });
      </script>
    </div>
    <div class="pure-u-1 pure-u-md-2-24"></div> 
  </div>
</body>
</html>
